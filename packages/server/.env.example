# ===========================================
# OANDA Trade Mirror - Server Configuration
# ===========================================
# Copy this file to .env and fill in your values
# NEVER commit .env to version control

# ===========================================
# REQUIRED - Core Settings
# ===========================================

# MongoDB connection string
MONGODB_URI=mongodb://localhost:27017/oanda-trade-mirror

# Server port
PORT=3001

# JWT secret for authentication (generate with: openssl rand -base64 32)
JWT_SECRET=

# ===========================================
# REQUIRED - Google OAuth (if using Google sign-in)
# ===========================================
# Get credentials from Google Cloud Console:
# https://console.cloud.google.com/apis/credentials

GOOGLE_CLIENT_ID=
GOOGLE_CLIENT_SECRET=
GOOGLE_CALLBACK_URL=http://localhost:3001/api/auth/google/callback

# ===========================================
# REQUIRED - Web Push Notifications
# ===========================================
# Generate VAPID keys with: npx web-push generate-vapid-keys

VAPID_PUBLIC_KEY=
VAPID_PRIVATE_KEY=
VAPID_EMAIL=mailto:your-email@example.com

# ===========================================
# PRODUCTION SETTINGS
# ===========================================
# Set these when deploying to production

# Set to 'production' for production deployment
NODE_ENV=development

# CORS origin for frontend (leave empty if serving from same origin)
# Example: https://your-app.example.com
CORS_ORIGIN=

# App URL for OAuth redirects and email links (leave empty if same origin as API)
# Example: https://your-app.example.com
APP_URL=

# ===========================================
# OPTIONAL - OANDA Settings
# ===========================================

# Default OANDA environment: 'practice' or 'live'
OANDA_ENVIRONMENT=practice

# Polling interval in milliseconds (if streaming disabled)
POLLING_INTERVAL_MS=3000

# ===========================================
# OPTIONAL - Streaming Configuration
# ===========================================

# Enable/disable streaming (true/false)
STREAMING_ENABLED=true

# Reconnection settings (milliseconds)
STREAM_RECONNECT_DELAY_MS=5000
STREAM_MAX_RECONNECT_DELAY_MS=300000
STREAM_HEARTBEAT_TIMEOUT_MS=30000
STREAM_MAX_FAILURES=10
FALLBACK_POLLING_INTERVAL_MS=10000

# ===========================================
# LEGACY - Migration Only
# ===========================================
# These are only used by the migration script (pnpm migrate)
# to import accounts from environment variables to MongoDB

# SOURCE_ACCOUNT_ID=
# SOURCE_TOKEN=
# MIRROR_1_ID=
# MIRROR_1_TOKEN=
# MIRROR_1_SCALE_FACTOR=1.0
# MIRROR_2_ID=
# MIRROR_2_TOKEN=
# MIRROR_2_SCALE_FACTOR=1.0
